{% extends "theater/layout.html" %}

{% block title %}
    Search results
{% endblock %}

{% block body %}

<h1 style="text-align: center;">Search results for '{{ searched }}'</h1>

    {% if films|length == 0 %}

        <h3 style="margin-left: 20px;">No results matching '{{searched}}' </h3>

    {% else %}

        {% for film in films %}
        <hr>
        <div class="container">
            <div class="row">
                <div class="col-6">
                    <h3 style="font-weight: bold;"> 
                        <a href="{% url 'view_film' film.id %}" id="film_title">  {{ film.title }} ({{ film.year }}) </a>
                    </h3>
                    <h4 id="film_director"> 
                        Directed by {{ film.director }}
                    </h4>
                    <br>
                    <img src="{{ film.poster }}" alt="Film Poster" style="width: auto; height: 250px;">
                </div>

                <div class="col-6">
                    <h4 class="imdb_rating" style="display: inline;"><i class="rating__star fas fa-star"></i> {{ film.imdb_rating }} </h4> <p style="display: inline; font-size: 1em;"> IMDB rating</p>
                    <div class="alert alert-dark" role="alert" id="main_cast_div" style="margin-top: 10px;">
                        <h5 > Main cast: <br> <p style="padding-top: 5px;">{{ film.main_cast }}</p> </h5>    
                    </div>
                    <div class="alert alert-dark" role="alert" id="main_cast_div" style="margin-top: 10px;">
                        <h5>Genre(s): <br> {{ film.genre }}</h5>
                    </div>
                    {% if user.is_authenticated and user.is_admin == False %}
                    <form action="{% url 'make_reservation' film.id %}">
                        <input type="submit" class="make_reservation" value="Make a reservation!"/>
                    </form>
                    {% elif user.is_authenticated and user.is_admin %}
                    <form action="{% url 'view_reservations' film.id %}" style="display: inline;">
                        <input type="submit" class="make_reservation" value="View reservations" />
                    </form>
                    <form action="{% url 'remove_film' film.id %}" style="display: inline;">
                        <input type="submit" class="make_reservation" value="Remove film" />
                    </form>
                    {% endif %}
                    <table class="table table-dark table-borderless" style="margin-top: 20px;" id="seats_table">
                        <tr>
                            <td><h6 style="text-align: center;"> Reserved </h6></td>
                            <td><h6> {{ film.reserved_seats_amount }} </h6></td>
                        </tr>
                        <tr>
                            <td><h6 style="text-align: center;"> Available </h6></td>
                            <td><h6> {{ film.seats_available }} </h6></td>
                        </tr>    
                    </table>
                    
                </div>
            </div>
        </div>
        {% endfor %}

    {% endif %}

{% endblock %}